<?php namespace OpenEMR\Common\Database{;;final class Auditor implements \Doctrine\DBAL\Logging\SQLLogger{public$queries=array();public$currentQueryIndex=0;private$logger;public function __construct(){$this->logger=new \OpenEMR\Common\Logging\Logger("\OpenEMR\Common\Database\Auditor");}public function startQuery($sql,array $params=null,array $types=null){$this->queries[++$this->currentQueryIndex]=array('sql'=>$sql,'params'=>$params);$this->logger->trace("sql: ".$sql);}public function stopQuery(){$sql=$this->queries[$this->currentQueryIndex]['sql'];$params=$this->queries[$this->currentQueryIndex]['params'];auditSQLEvent($sql,true,$params);unset($this->queries[$this->currentQueryIndex]);}}}